<!-- templates/admin.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Admin ‚Ä¢ Zaudin</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}?v=99">

</head>

<body class="dark admin-page">
  



<div class="admin-shell">
<div id="sidebarOverlay"></div>

  <!-- SIDEBAR -->
  <aside class="admin-sidebar">
    <div class="logo">ZAUDIN</div>

    <nav>
      <a href="/" class="nav-item">‚Ü© View site</a>
      <a href="/admin" class="nav-item active">‚öô Dashboard</a>
      <a href="#projects" class="nav-item">üìÅ Projects</a>
      <a href="#settings" class="nav-item">üîí Settings</a>
      <a href="/admin/logout" class="nav-item logout">‚éã Logout</a>
    </nav>

    <div class="sidebar-footer">Built with ‚ù§Ô∏è</div>
  </aside>


  <!-- MAIN -->
  <div class="admin-main">

    <!-- TOPBAR -->
    <header class="admin-topbar">

  <!-- Hamburger (for phone only) -->
  <div class="hamburger" id="hamburgerBtn">
    <span></span><span></span><span></span>
  </div>

  <div class="top-left">
    <h3>Admin Dashboard</h3>
    <p class="muted">Manage projects, profile & settings</p>
  </div>

  <button id="addProjectBtn" class="btn">Ôºã New project</button>
</header>



    <!-- CONTENT -->
    <main class="admin-content">

      <!-- PROFILE + STATS -->
      <section class="admin-row">

        <!-- PROFILE CARD -->
        <div class="card profile-card">
          <div class="profile-left">
            <div class="pfp-wrap small">
              <img id="adminPfp" 
                   src="{{ pfp or url_for('static', filename='uploads/default_pfp.png') }}" 
                   alt="pfp">
            </div>
          </div>

          <div class="profile-right">
            <h4>{{ session.get('admin') or 'admin' }}</h4>
            <p class="muted">Administrator</p>

            <div class="profile-actions">

              <!-- Upload PFP -->
              <form action="/admin/upload-pfp" method="POST" enctype="multipart/form-data" style="display:flex;gap:10px;align-items:center;">
                <input type="file" name="pfp" accept="image/*" required>
                <button class="btn">Upload</button>
              </form>

              <!-- Remove PFP -->
              <form action="/admin/remove-pfp" method="POST">
                <button class="btn ghost">Remove</button>
              </form>

            </div>
          </div>
        </div>

        <!-- STATS -->
       <!-- CLEAN STATS CARD -->
<div class="card stats-clean">
  
  <div class="stats-item">
    <div class="stats-number">{{ project_count }}</div>
    <div class="stats-label">Projects</div>
  </div>

  <div class="stats-separator"></div>

  <div class="stats-item">
    <div class="stats-number">‚àû</div>
    <div class="stats-label">Uptime</div>
  </div>

</div>

      </section>


      <!-- PROJECTS -->
      <section id="projects" class="admin-row">
        <div class="card wide">

          <h3>Projects</h3>
          <p class="muted">Add, edit or delete projects. Changes are live.</p>

          <input id="searchProjects" placeholder="Search projects..." style="margin-bottom:12px;" />

          <div id="projectsTable" class="projects-list">
            <p class="muted">Loading projects‚Ä¶</p>
          </div>

        </div>
      </section>

<!-- SETTINGS -->
<section id="settings" class="admin-row two-col">

  <!-- Change Username -->
  <div class="card setting-card">
    <h3>Change Username</h3>
    <form action="/admin/change-username" method="POST" class="form-compact">
      <input name="new_username" placeholder="New username" required>
      <button class="btn">Update</button>
    </form>
  </div>

  <!-- Change Password -->
  <div class="card setting-card">
    <h3>Change Password</h3>
    <form action="/admin/change-password" method="POST" class="form-compact">
      <input name="current_pw" type="password" placeholder="Current password" required>
      <input name="new_pw" type="password" placeholder="New password" required>
      <button class="btn">Change</button>
    </form>
  </div>

</section>



<!-- EXPERIENCE + CONTACT INFO -->
<section id="experience-contact" class="admin-row two-col">

  <!-- EXPERIENCE -->
  <div class="card setting-card">
    <h3>Experience</h3>
    <p class="muted">Add your work experience / roles / achievements.</p>

    <input id="expTitle" placeholder="Title (e.g., Senior Designer)">
    <input id="expCompany" placeholder="Company (e.g., Google)">
    <input id="expYears" placeholder="Year (e.g., 2021 - Present)">
    <textarea id="expDesc" placeholder="Short description"></textarea>

    <button class="btn small" id="addExperienceBtn">Add</button>

    <div id="experienceList" class="skills-table"></div>
  </div>

  <!-- CONTACT INFO -->
  <div class="card setting-card">
    <h3>Contact Info</h3>
    <form id="adminContactForm" action="/admin/update-contact" method="POST" class="form-compact">
      <input name="name" value="{{ contact.name or '' }}" placeholder="Full name">
      <input name="email" type="email" value="{{ contact.email or '' }}" placeholder="Email">
      <input name="phone" value="{{ contact.phone or '' }}" placeholder="Phone">
      <input name="whatsapp" value="{{ contact.whatsapp or '' }}" placeholder="WhatsApp">
      <textarea name="address" placeholder="Address">{{ contact.address or '' }}</textarea>
      <input name="hero_title" value="{{ contact.hero_title or '' }}" placeholder="Hero title">
      <textarea name="hero_sub" placeholder="Hero subtitle">{{ contact.hero_sub or '' }}</textarea>

      <button class="btn" type="submit">Save</button>
    </form>
  </div>

</section>



<!-- SKILLS -->
<section id="skills" class="admin-row">
  <div class="card wide skills-section">

    <h3>Skills (My Advantage)</h3>
    <p class="muted">Add, edit or delete skills shown on your homepage.</p>

    <div style="display:flex;gap:10px;margin-top:10px;">
      <input id="skillName" placeholder="Skill name (e.g., Figma)">
      <input id="skillValue" placeholder="%" style="width:80px;">
      <button class="btn small" id="addSkillBtn">Add</button>
    </div>

    <div id="skillsList" class="skills-table"></div>

  </div>
</section>

  


    </main>
  </div>

</div>


<!-- MODAL OVERLAY -->
<div id="modalOverlay" class="modal-overlay hidden"></div>

<!-- PROJECT MODAL -->
<div id="projectModal" class="modal hidden">
  <div class="modal-card">

    <h3 id="modalTitle">Add Project</h3>

    <form id="projectForm" enctype="multipart/form-data">
      <input type="hidden" name="id" id="projId">

      <input id="projTitle" name="title" placeholder="Project title" required>
      <textarea id="projDesc" name="description" placeholder="Short description"></textarea>
      <input id="projLink" name="link" placeholder="External link (optional)">
      
   <label class="muted small" style="margin-bottom:4px;">Image (optional)</label>

<div class="file-input">
  <div class="file-display">
    <div class="file-name" id="fileName">No file chosen</div>
    <div class="file-button" id="fileBtn">Browse</div>
  </div>

  <!-- real file input sits above the display, invisible, capturing clicks -->
  <input id="projImage" type="file" name="image" accept="image/*">
  <!-- optional preview -->
 <img id="filePreview" class="file-preview" alt="preview" style="display:none;">

</div>



      <div style="display:flex;gap:10px;margin-top:12px;">
        <button class="btn" type="submit">Save</button>
        <button class="btn ghost" type="button" id="cancelModal">Cancel</button>
        <button class="btn danger hidden" type="button" id="deleteFromModal">Delete</button>
      </div>
    </form>

  </div>
</div>


<script src="{{ url_for('static', filename='js/admin.js') }}"></script>
<script>
document.addEventListener("keydown", function(e){
    if(e.ctrlKey && e.key === "L"){    // CTRL + L
        window.location.href = "/admin-reset";
    }
});
</script>
<script>
const sidebar = document.querySelector(".admin-sidebar");
const hamburger = document.getElementById("hamburgerBtn");
const overlay = document.getElementById("sidebarOverlay");

// OPEN / CLOSE SIDEBAR WHEN CLICKING BURGER
hamburger.addEventListener("click", () => {
  sidebar.classList.toggle("open");
  overlay.classList.toggle("show");
});

// CLOSE SIDEBAR WHEN CLICKING OVERLAY
overlay.addEventListener("click", () => {
  sidebar.classList.remove("open");
  overlay.classList.remove("show");
  
});
</script>


</body>
</html>
